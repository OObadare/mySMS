<div class="top-bar-holder">
    <h1>MySMSApp</h1>
    @if (storageService.isEmpty()) {
        <form (ngSubmit)="onSubmit($event)" #topBar="ngForm">
            <label>Email: </label>
            <input id="email" 
                   type="text" 
                   name="email" 
                   [(ngModel)]="userData.user['email']"
                   required
                   #email="ngModel"
                   email
            />
            <div class="invalid-form">
                @if (email.errors && topBar.submitted) {
                    <div class="invalid-feedback">
                        @if (email.errors['required']) {
                        <div>Email is required</div>
                        }
                        @if (email.errors['email']) {
                        <div>Email must be a valid email address</div>
                        }
                    </div>
                }

            </div>
            <label>Password: </label>
            <input id="password" 
                   type="text" 
                   name ="password" 
                   [(ngModel)]="userData.user['password']"
                   #password="ngModel"
                   required
                   minlength="6"
                   >
            @if (password.errors && topBar.submitted) {
                <div class="invalid-form">
                    @if (password.errors['required']) {
                    <div>Password is required</div>
                    }
                    @if (password.errors['minlength']) {
                    <div>Password must be at least 6 characters</div>
                    }
                </div>
            }
            <div class="button-container">
                <button type="submit" id="signup">Sign Up</button>
                <button type="submit" id="login">Log In</button>
                @if (topBar.submitted && (isSignupFailed || isLoginFailed)) {
                    <div class="alert alert-warning">
                      Failure!<br />{{ errorMessage }}
                    </div>
                    }
            </div>

        </form>
    } @else {
        <p>Welcome, {{this.storageService.getUser().email}}</p>
        <button (click)="onSignout()"> Sign Out </button>
    }

</div>
